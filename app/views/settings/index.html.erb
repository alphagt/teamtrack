<h1>Settings</h1>
<br />
<% content_for :nav do %>
	<%  render partial: "layouts/navigation", locals: {active: "settings"} %>
<% end %>

<% content_for :sidebarwide do %>
	<table class="table">
		<tr>
			<td class="danger"><%= link_to 'New Setting', new_setting_path %></td>
		</tr>
		<tr>
			<td class="danger"><%= link_to 'New Invite Code', addInviteCode_account_path(@acct) %></td>
		</tr>
	</table>
<% end %>

<% content_for :main1 do %>
<row>
	<div class="col-md-12 col-centered">
		<b>Invite Codes</b>
		<table class="table">
			<thead>
				<tr>
					<th>Invite Code</th>
					<th>Expiry</th>
					<th colspan="1"></th>
				</tr>
			</thead>
			<tbody>
				<% @acct.invitecodes.current.each do |code| %>
				<tr>
					<td><%= code.code %></td>
					<td><%= code.expire %></td>
					<td><%= link_to 'Delete', removeInviteCode_accounts_path(:code => code.code) %></td>
				</tr>
				<% end %>
			</tbody>
		</table>
	</div>
</row>
<row>
	<div class="col-md-12 col-centered">
		<b>Settings</b>
		<table class="table">
		  <thead>
			<tr>
			  <th>Setting</th>
			  <% if @sysadmin then %>
			  	<th>Ordinal</th>
			  <% end %>
			  <th>Value</th>
			  <th>Display</th>
			  <th>Description</th>
			  <th colspan="3"></th>
			</tr>
		  </thead>
		  <tbody>
			<% @settings.each do |setting| %>
			  <tr>
				<% if !@sysadmin then %>
					<td><%= get_cfield_name(setting.key) %></td>
					<td><%= setting.value.upcase %></td>
				<% else %>
					<td><%= setting.key %></td>
					<td><%= setting.ordinal %></td>
					<td><%= setting.value %></td>
				<% end %>
				
				<td><%= setting.displayname %></td>
				<td><%= setting.description %></td>
				<td><%= link_to 'Show', setting %></td>
				<td><%= link_to 'Edit', edit_setting_path(setting) %></td>
				<td><%= link_to 'Destroy', setting, method: :delete, data: { confirm: 'Are you sure?' } %></td>
			  </tr>
			<% end %>
		  </tbody>
		</table>
	</div>
</row>
<br>
<% end %>

